#!/usr/bin/env php
<?php

$DVC_VERSION = '1.0.0';

// Optional ASCII splash
echo <<<ASCII
  _____    ___    ___  ______ 
 |   _  \  \  \  /  / |   ___\
 |  | |  |  \  \/  /  |  |
 |  |_|  |   \    /   |  |___ 
 |______/     \__/    |______/
  ____  _   _ ____      _____                                          _                                          
 |  _ \| | | |  _ \    |  _ _|_  __ _ _ __ ___   ___ _     __ ___  _ _| | __
 | |_) | |_| | |_) |   | |_| '_`/ _` | '_ ` _ \ / _ \ \   / // _ \| '_` |/ /
 |  __/|  _  |  __/    |  _| | | (_| | | | | | |  __|\ `^' /| (_) | | |  < 
 |_|   |_| |_|_|       |_| |_|  \__,_|_| |_| |_|\___| \_^_/  \___/|_| |_|\_\ ...

DVC CLI â€” v $DVC_VERSION

ASCII;


// Parse arguments
$args = $argv;
array_shift($args); // remove script name

$command = $args[0] ?? null;
$port = 1265;


switch ($command) {
  case 'serve':
    printf("Starting local dev server at http://localhost:%s...\n", $port);
    chdir(__DIR__ . '/tests/www');
    passthru(sprintf('php -S 0.0.0.0:%s _mvp.php', $port));
    break;

  default:
    echo "Available commands:\n";
    echo "  serve                Start the dev server\n";
    echo "  make:controller Name Generate a controller\n";
    echo "  version              Show version\n";
    break;
}
